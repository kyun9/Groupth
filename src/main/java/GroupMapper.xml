<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="GroupMapper">
	<insert id="insertGroup" parameterType="vo.GroupVO">
		<selectKey resultType="_int" keyProperty="gid" order="BEFORE">
			select GROUPS_SEQ.nextval from dual
		</selectKey>
		insert into groups(gid, g_name, fid, leader, g_content, limit_mem, img)
		values(#{gid},#{g_name},#{fid},#{leader},#{g_content},#{limit_mem},#{img})
	</insert>
	<select id="ListAllGroup" resultType="vo.Group_InfoVO">
		select * from groups,field where groups.fid =field.fid
	</select>
	<select id = "searchInfo" parameterType = "java.util.HashMap" resultType="vo.Group_InfoVO">
		select * from groups,field where groups.fid =field.fid and (field.type = #{field} or groups.g_name like '%'||#{key}||'%')
	</select>
</mapper>